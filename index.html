<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Instagram_tf ‚Äî Cart & Purchases v2</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    /* Base Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: 'Inter', sans-serif; background: #fff; color: #222; }
    a { color: #0073e6; text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* Header */
    header {
      text-align: center;
      padding: 50px 20px;
      background: linear-gradient(to right, #ff6a00, #ee0979);
      color: white;
      border-radius: 0 0 20px 20px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      user-select: none;
    }
    header h1 { font-size: 3em; margin-bottom: 0.3em; text-shadow: 2px 2px 6px rgba(0,0,0,0.35); }
    header h2 { font-weight: 400; font-size: 1.8em; text-shadow: 1px 1px 4px rgba(0,0,0,0.25); }
    marquee { margin-top: 15px; }

    .container { max-width: 960px; margin: 0 auto 40px; padding: 0 15px; }

    /* Purchase count */
    .purchase-count { font-weight: bold; font-size: 1.2em; margin: 20px 0; text-align: center; }

    /* Form elements */
    form, .cart-section {
      background: #f9f9f9; border-radius: 15px; padding: 25px 30px;
      box-shadow: 0 0 15px rgb(0 0 0 / 0.05); margin-bottom: 30px;
    }
    label { display: block; margin-bottom: 6px; font-weight: 600; }
    select, input[type=text], input[type=email], textarea {
      width: 100%; padding: 10px 12px; margin-bottom: 20px;
      border: 1.8px solid #ddd; border-radius: 10px; font-size: 1em;
      transition: border-color 0.3s ease;
    }
    select:hover, input:hover, textarea:hover,
    select:focus, input:focus, textarea:focus { border-color: #ee0979; outline: none; }
    button {
      background: #ee0979; border: none; color: white;
      padding: 14px 22px; font-size: 1.1em; border-radius: 15px; cursor: pointer;
      width: 100%; font-weight: 700; transition: background-color 0.3s ease;
      user-select: none;
    }
    button:hover { background: #c2185b; }
    button:disabled { background: #ccc; cursor: not-allowed; }

    /* Login Section */
    .login-section {
      max-width: 380px; margin: 15px auto 40px; padding: 20px;
      background: #fafafa; border-radius: 15px;
      box-shadow: 0 0 20px rgb(0 0 0 / 0.05);
    }
    .login-section h3 { text-align: center; margin-bottom: 15px; color: #ee0979; font-weight: 700; }
    .login-section input { padding: 10px 14px; border: 1.5px solid #ddd; border-radius: 10px; }
    .login-section input:focus { border-color: #ee0979; }

    /* Panels */
    #userPanel, #adminPanel { max-width: 900px; margin: 0 auto 40px; padding: 20px; background: #fefefe; border-radius: 15px; box-shadow: 0 0 20px rgb(0 0 0 / 0.05); }
    #userPanel h2, #adminPanel h2 { color: #ee0979; }
    .logout-btn { background: #444; margin-top: 15px; padding: 10px 20px; border-radius: 10px; font-weight: 700; width: auto; }
    .logout-btn:hover { background: #222; }

    /* Cart section */
    .cart-section { background: #fff8fa; border: 2px solid #ee0979; }
    .cart-section h3 { color: #ee0979; margin-bottom: 15px; }
    #cartItems div { padding: 10px 0; border-bottom: 1px solid #eee; }
    .cart-remove-btn {
      background: #dc2743; color: white; border: none;
      padding: 5px 10px; margin-left: 15px; border-radius: 5px; cursor: pointer;
    }

    /* Payment QR */
    .payment-section { text-align: center; margin: 30px 0 50px; user-select: none; }
    .payment-section p { font-weight: bold; font-size: 1.3em; color: #333; margin-bottom: 10px; }
    .payment-section img { width: 150px; height: 150px; border-radius: 15px; box-shadow: 0 0 12px #555; }
    .payment-section small { color: #666; font-style: italic; display: block; margin-top: 10px; }

    /* Purchase history, admin orders */
    .purchase-history, .admin-orders { margin-top: 25px; border-top: 2px solid #ee0979; padding-top: 15px; max-height: 320px; overflow-y: auto; }
    .purchase-history div, .admin-orders div { border-bottom: 1px solid #eee; padding: 10px 0; user-select: text; }
    .purchase-history div:last-child, .admin-orders div:last-child { border-bottom: none; }
    .purchase-history strong, .admin-orders strong { color: #ee0979; }

    .order-complete-btn {
      background: #28a745; padding: 8px 15px; border-radius: 10px; color: white;
      border: none; cursor: pointer; font-weight: 600; margin-top: 5px;
      transition: background-color 0.3s ease;
    }
    .order-complete-btn:hover { background: #1e7e34; }

    /* Ratings */
    #ratingSection {
      margin-top: 20px; background: #fef3f3; padding: 20px;
      border-radius: 15px; max-width: 600px; margin-left: auto; margin-right: auto;
      box-shadow: 0 0 15px rgba(204, 35, 102, 0.2); display: none;
    }
    #ratingSection label { font-weight: 600; margin-bottom: 8px; color: #ee0979; }
    #ratingSection textarea { height: 80px; resize: vertical; }

    .live-ratings {
      margin-top: 30px; max-width: 600px; margin-left: auto; margin-right: auto;
      background: #fff0f6; border-radius: 15px; padding: 15px 20px;
      box-shadow: 0 0 10px rgba(204, 35, 102, 0.3); user-select: none;
    }
    .live-ratings h3 { color: #ee0979; margin-bottom: 10px; }
    .live-ratings span { font-weight: 700; font-size: 1.3em; margin-right: 15px; }
    .recent-ratings { margin-top: 15px; max-height: 180px; overflow-y: auto; padding-left: 10px; border-left: 4px solid #ee0979; font-style: italic; color: #aa0044; }
    .purchase-history::-webkit-scrollbar,
    .admin-orders::-webkit-scrollbar,
    .recent-ratings::-webkit-scrollbar { width: 8px; }
    .purchase-history::-webkit-scrollbar-thumb,
    .admin-orders::-webkit-scrollbar-thumb,
    .recent-ratings::-webkit-scrollbar-thumb { background-color: #ee0979; border-radius: 10px; }

    /* Floating Chat Buttons */
    .chat-btn {
      position: fixed; bottom: 20px; background: #25D366;
      color: white; padding: 12px; border-radius: 50%;
      font-size: 22px; text-decoration: none;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      display: inline-flex; align-items: center; justify-content: center;
    }
    .telegram-btn { bottom: 80px; background: #0088cc; }
  </style>
</head>
<body>

<header>
  <h1>CHEAP AND BEST SELLING ON INSTAGRAM</h1>
  <h2>LIKES ¬∑ VIEWS ¬∑ FOLLOWERS</h2>
  <marquee behavior="scroll" direction="left" scrollamount="7">
    üöÄ EVERY PURCHASE CASH BACK ‚Çπ20 | üîß CART & MULTI‚ÄëBUY NOW LIVE! | üì± TELEGRAM BOOST COMING SOON!
  </marquee>
</header>

<div class="container">
  <div class="purchase-count" id="purchaseCount">Total Purchases: 0</div>

  <a href="https://wa.me/91XXXXXXXXXX" target="_blank" class="chat-btn whatsapp-btn">üí¨</a>
  <a href="https://t.me/YOUR_TELEGRAM" target="_blank" class="chat-btn telegram-btn">üì®</a>

  <!-- LOGIN SECTIONS -->
  <section class="login-section" id="userLoginSection">
    <h3>User Login</h3>
    <form id="userLoginForm">
      <input type="text" id="userLoginName" placeholder="Username (e.g., TF1000)" required />
      <input type="password" id="userLoginPass" placeholder="Password (same as username)" required />
      <button type="submit">Login</button>
    </form>
  </section>

  <section class="login-section" id="adminLoginSection">
    <h3>Admin Login</h3>
    <form id="adminLoginForm">
      <input type="text" id="adminLoginName" placeholder="Admin Username" required />
      <input type="password" id="adminLoginPass" placeholder="Admin Password" required />
      <button type="submit">Login</button>
    </form>
  </section>

  <!-- USER PANEL -->
  <section id="userPanel" style="display:none;">
    <h2>Welcome, <span id="userDisplayName"></span></h2>

    <!-- CART -->
    <section class="cart-section">
      <h3>üõí Your Cart</h3>
      <div id="cartItems">Cart is empty.</div>
      <button id="submitCartBtn" style="margin-top:10px;display:none;">Submit Cart Purchase</button>
    </section>

    <!-- PURCHASE FORM -->
    <form id="purchaseForm">
      <label for="optionSelect">Select Option</label>
      <select id="optionSelect" required>
        <optgroup label="LIKES">
          <option value="likes-1k" data-price="100" data-label="1K LIKES - 100 RS">1K LIKES - 100 RS</option>
          <option value="likes-2k" data-price="150" data-label="2K LIKES - 150 RS">2K LIKES - 150 RS</option>
          <option value="likes-5k" data-price="250" data-label="5K LIKES - 250 RS">5K LIKES - 250 RS</option>
          <option value="likes-10k" data-price="500" data-label="10K LIKES - 500 RS">10K LIKES - 500 RS</option>
        </optgroup>
        <optgroup label="VIEWS">
          <option value="views-1k" data-price="200" data-label="1K VIEWS - 200 RS">1K VIEWS - 200 RS</option>
          <option value="views-2k" data-price="250" data-label="2K VIEWS - 250 RS">2K VIEWS - 250 RS</option>
          <option value="views-5k" data-price="550" data-label="5K VIEWS - 550 RS">5K VIEWS - 550 RS</option>
          <option value="views-10k" data-price="1000" data-label="10K VIEWS - 1000 RS">10K VIEWS - 1000 RS</option>
        </optgroup>
        <optgroup label="FOLLOWERS">
          <option value="followers-1k" data-price="500" data-label="1K FOLLOWERS - 500 RS">1K FOLLOWERS - 500 RS</option>
          <option value="followers-2k" data-price="1000" data-label="2K FOLLOWERS - 1000 RS">2K FOLLOWERS - 1000 RS</option>
          <option value="followers-5k" data-price="2500" data-label="5K FOLLOWERS - 2500 RS">5K FOLLOWERS - 2500 RS</option>
          <option value="followers-10k" data-price="5500" data-label="10K FOLLOWERS - 5500 RS">10K FOLLOWERS - 5500 RS</option>
        </optgroup>
      </select>

      <label for="instaProfile">Instagram Profile <span style="color:#ee0979;">*</span></label>
      <input type="text" id="instaProfile" placeholder="Public profile username" required />

      <label for="postLink">Instagram Post Link / Reels URL</label>
      <input type="text" id="postLink" placeholder="Post or reels URL (optional)" />

      <label for="mailId">Email ID</label>
      <input type="email" id="mailId" placeholder="Enter your valid email" required />

      <label for="paymentUtr">Payment UTR Number</label>
      <input type="text" id="paymentUtr" placeholder="Enter payment UTR number" required />

      <button type="submit">Add to Cart</button>
    </form>

    <!-- PAYMENT QR -->
    <div class="payment-section">
      <p>Payment Method:</p>
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay?pa=6304431702@upi" alt="Payment QR Code"/>
      <small>Scan this QR code to pay</small>
    </div>

    <!-- PURCHASE HISTORY -->
    <section class="purchase-history" id="purchaseHistory">
      <h3>Your Purchases</h3>
      <div id="userPurchaseList">No purchases yet.</div>
    </section>

    <!-- RATING SECTION -->
    <section id="ratingSection">
      <h3>Rate Your Order</h3>
      <label for="ratingStars">Rating (1‚Äë5)</label>
      <select id="ratingStars">
        <option value="">Select Rating</option>
        <option value="1">‚≠ê 1 Star</option>
        <option value="2">‚≠ê‚≠ê 2 Stars</option>
        <option value="3">‚≠ê‚≠ê‚≠ê 3 Stars</option>
        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê 4 Stars</option>
        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5 Stars</option>
      </select>
      <label for="ratingComments">Comments (optional)</label>
      <textarea id="ratingComments" placeholder="Write your review..."></textarea>
      <button id="submitRatingBtn">Submit Rating</button>
      <button id="cancelRatingBtn" style="background:#aaa;">Cancel</button>
    </section>

    <button class="logout-btn" id="userLogoutBtn">Logout</button>

    <!-- LIVE RATINGS DISPLAY -->
    <div class="live-ratings" aria-live="polite" aria-atomic="true">
      <h3>Live Ratings</h3>
      <span>Average Rating: <strong id="avgRating">N/A</strong></span>
      <span>Total Ratings: <strong id="totalRatings">0</strong></span>
      <div class="recent-ratings" id="recentRatings">No ratings yet.</div>
    </div>
  </section>

  <!-- ADMIN PANEL -->
  <section id="adminPanel" style="display:none;">
    <h2>Admin Panel</h2>
    <div class="admin-orders">
      <h3>Pending Orders</h3>
      <div id="ordersContainer">No pending orders.</div>
    </div>
    <button class="logout-btn" id="adminLogoutBtn">Logout</button>
  </section>

</div>

<script>
// --- Constants & State ---
const ADMIN_USERNAME = "6304431702", ADMIN_PASSWORD = "5454";
let currentUser = null;
let orders = JSON.parse(localStorage.getItem('orders')) || [];
let ratings = JSON.parse(localStorage.getItem('ratings')) || [];
let cart = [];

// --- DOM References ---
const userLoginSection = document.getElementById('userLoginSection');
const adminLoginSection = document.getElementById('adminLoginSection');
const userPanel = document.getElementById('userPanel');
const adminPanel = document.getElementById('adminPanel');
const purchaseForm = document.getElementById('purchaseForm');
const optionSelect = document.getElementById('optionSelect');
const cartItemsEl = document.getElementById('cartItems');
const submitCartBtn = document.getElementById('submitCartBtn');
const purchaseCountEl = document.getElementById('purchaseCount');
const userPurchaseList = document.getElementById('userPurchaseList');
const adminOrdersList = document.getElementById('ordersContainer');
const ratingSection = document.getElementById('ratingSection');
const ratingStars = document.getElementById('ratingStars');
const ratingComments = document.getElementById('ratingComments');
const submitRatingBtn = document.getElementById('submitRatingBtn');
const cancelRatingBtn = document.getElementById('cancelRatingBtn');
const avgRatingEl = document.getElementById('avgRating');
const totalRatingsEl = document.getElementById('totalRatings');
const recentRatingsEl = document.getElementById('recentRatings');
const userLogoutBtn = document.getElementById('userLogoutBtn');
const adminLogoutBtn = document.getElementById('adminLogoutBtn');

// --- LocalStorage Helpers ---
function saveOrders() { localStorage.setItem('orders', JSON.stringify(orders)); }
function saveRatings() { localStorage.setItem('ratings', JSON.stringify(ratings)); }

// --- UI Updates ---
function updatePurchaseCount() { purchaseCountEl.textContent = `Total Purchases: ${orders.length}`; }

function updateCartDisplay() {
  if (!cart.length) {
    cartItemsEl.textContent = 'Cart is empty.';
    submitCartBtn.style.display = 'none';
    return;
  }
  cartItemsEl.innerHTML = cart.map((item,i)=> `
    <div>${item.label}
      <button class="cart-remove-btn" onclick="removeCartItem(${i})">Remove</button>
    </div>`).join('');
  submitCartBtn.style.display = 'inline-block';
}

function renderUserPurchases() {
  if (!currentUser) return;
  const userOrders = orders.filter(o => o.username === currentUser);
  if (!userOrders.length) {
    userPurchaseList.textContent = 'No purchases yet.';
    ratingSection.style.display = 'none';
    return;
  }
  userPurchaseList.innerHTML = userOrders.map((order, idx) => `
    <div>
      <strong>Order #${idx+1}</strong> - ${order.selectedOptionLabel} -
      Status: <span style="color:${order.status==='success'?'green':'orange'}">${order.status}</span><br>
      Instagram: ${order.instaProfile}<br>
      Link: ${order.postLink||'-'}<br>
      Email: ${order.mailId}<br>
      UTR: ${order.paymentUtr}
    </div>`).join('');
  const pendingRatingIndex = userOrders.findIndex(o => o.status==='success' && !o.rated);
  if (pendingRatingIndex > -1) {
    ratingSection.style.display = 'block';
    ratingSection.dataset.orderIndex = orders.findIndex(o=>o.username===currentUser && o.status==='success' && !o.rated);
  } else {
    ratingSection.style.display = 'none';
  }
}

function renderAdminOrders() {
  const pending = orders.filter(o=>o.status==='pending');
  if (!pending.length) {
    adminOrdersList.textContent = 'No pending orders.';
    return;
  }
  adminOrdersList.innerHTML = pending.map((order, idx) => `
    <div>
      <strong>Order #${idx+1}</strong> - ${order.selectedOptionLabel}<br>
      User: ${order.username}<br>
      Instagram: ${order.instaProfile}<br>
      Link: ${order.postLink||'-'}<br>
      Email: ${order.mailId}<br>
      UTR: ${order.paymentUtr}<br>
      <button class="order-complete-btn" data-index="${orders.indexOf(order)}">Mark as Success</button>
    </div>`).join('');
  document.querySelectorAll('.order-complete-btn').forEach(btn => {
    btn.onclick = () => {
      const i = parseInt(btn.dataset.index,10);
      if (confirm('Mark order as SUCCESS?')) {
        orders[i].status = 'success';
        saveOrders();
        alert('Order marked success; user can now rate.');
        renderAdminOrders();
        if (currentUser) renderUserPurchases();
        updatePurchaseCount();
      }
    };
  });
}

function updateLiveRatings() {
  if (!ratings.length) {
    avgRatingEl.textContent = 'N/A';
    totalRatingsEl.textContent = '0';
    recentRatingsEl.textContent = 'No ratings yet.';
    return;
  }
  const sum = ratings.reduce((a,r)=>a+r.rating,0);
  const avg = (sum / ratings.length).toFixed(2);
  avgRatingEl.textContent = `${avg} ‚≠ê`;
  totalRatingsEl.textContent = ratings.length;
  recentRatingsEl.innerHTML = ratings.slice(-5).reverse().map(r=>`
    <div>‚≠ê ${r.rating} - ${r.comment||'<i>No comment</i>'} <br>
      <small><b>${r.username}</b></small>
    </div>`).join('');
}

// --- Cart Logic ---
optionSelect.addEventListener('change', ()=>{
  const opt = optionSelect.selectedOptions[0];
  cart.push({ value: opt.value, label: opt.dataset.label });
  updateCartDisplay();
});
window.removeCartItem = function(i) { cart.splice(i,1); updateCartDisplay(); }
submitCartBtn.onclick = () => {
  const insta = document.getElementById('instaProfile').value.trim();
  const mail = document.getElementById('mailId').value.trim();
  const utr = document.getElementById('paymentUtr').value.trim();
  if (!insta || !mail.includes('@') || !utr) return alert('Fill all required fields!');
  cart.forEach(item => {
    orders.push({
      username: currentUser,
      selectedOptionValue: item.value,
      selectedOptionLabel: item.label,
      instaProfile: insta, postLink: document.getElementById('postLink').value.trim(),
      mailId: mail, paymentUtr: utr, status: 'pending', rated: false
    });
  });
  saveOrders(); cart=[]; updateCartDisplay();
  alert('Cart submitted!'); renderUserPurchases(); updatePurchaseCount(); purchaseForm.reset();
};

// --- Purchase Form Submit ---
purchaseForm.addEventListener('submit', e=>{
  e.preventDefault();
  optionSelect.dispatchEvent(new Event('change'));
});

// --- Rating Submit/Cancel ---
submitRatingBtn.onclick = ()=>{
  const idx = parseInt(ratingSection.dataset.orderIndex,10);
  const r = parseInt(ratingStars.value,10);
  const comment = ratingComments.value.trim();
  if (!r || r<1 || r>5) return alert('Choose rating 1‚Äì5.');
  orders[idx].rated = true;
  saveOrders();
  ratings.push({ username: currentUser, rating: r, comment, timestamp: new Date().toISOString() });
  saveRatings();
  alert('Thanks for rating!');
  ratingComments.value = '';
  ratingSection.style.display = 'none';
  updateLiveRatings();
  renderUserPurchases();
};
cancelRatingBtn.onclick = ()=>{ ratingComments.value=''; ratingSection.style.display='none'; }

// --- Login / Logout ---
document.getElementById('userLoginForm').addEventListener('submit', e=>{
  e.preventDefault();
  const u = document.getElementById('userLoginName').value.trim();
  const p = document.getElementById('userLoginPass').value.trim();
  if (!u.toUpperCase().startsWith('TF') || p !== u) return alert("Invalid user credentials.");
  currentUser = u;
  document.getElementById('userDisplayName').textContent = u;
  userLoginSection.style.display='none';
  adminLoginSection.style.display='none';
  userPanel.style.display='block';
  adminPanel.style.display='none';
  renderUserPurchases();
  updatePurchaseCount();
  updateLiveRatings();
});

document.getElementById('adminLoginForm').addEventListener('submit', e=>{
  e.preventDefault();
  const u = document.getElementById('adminLoginName').value.trim();
  const p = document.getElementById('adminLoginPass').value.trim();
  if (u !== ADMIN_USERNAME || p !== ADMIN_PASSWORD) return alert("Invalid admin credentials.");
  currentUser='admin';
  userLoginSection.style.display='none';
  adminLoginSection.style.display='none';
  userPanel.style.display='none';
  adminPanel.style.display='block';
  renderAdminOrders();
  updatePurchaseCount();
});

userLogoutBtn.onclick = ()=>{ if(confirm("Logout?")){ currentUser=null; userPanel.style.display='none'; userLoginSection.style.display='block'; ratingSection.style.display='none'; purchaseForm.reset(); } };
adminLogoutBtn.onclick = ()=>{ if(confirm("Logout admin?")){ currentUser=null; adminPanel.style.display='none'; adminLoginSection.style.display='block'; } };

// --- Initial Setup ---
userLoginSection.style.display='block';
adminLoginSection.style.display='block';
userPanel.style.display='none';
adminPanel.style.display='none';
ratingSection.style.display='none';
updatePurchaseCount();
updateLiveRatings();
</script>

</body>
</html>
